{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const formElem = document.querySelector('.search-form');\n    const galleryEl = document.querySelector('#gallery-o');\n    const loaderElem = document.querySelector('.loader');\n    const loadMoreBtn = document.querySelector('.load-more-btn');\n    const loadMoreLoader = document.querySelector('.load-more-loader');\n    const endOfCollectionMsg = document.querySelector('.end-of-collection');\n\n    hideLoader();\n\n    const lightbox = new SimpleLightbox('.gallery-o a', {\n        captionDelay: 250,\n    });\n\n    formElem.addEventListener('submit', onSubmit);\n\n    let currentPage = 1;\n    let currentSearch = '';\n\n    async function onSubmit(e) {\n        e.preventDefault();\n        showLoader();\n        currentPage = 1;\n        currentSearch = formElem.querySelector('.input-search').value;\n\n        try {\n            const data = await getPhotoBySearch(currentSearch, currentPage);\n            renderImages(data.hits);\n        } catch (error) {\n            renderError(error);\n        } finally {\n            hideLoader();\n        }\n    }\n\n    function getPhotoBySearch(searchValue, page) {\n        const BASE_URL = 'https://pixabay.com/api/';\n        const KEY = '42296578-21d0e9ca438ad812aa67579cd';\n        const Query = `?key=${KEY}&q=${searchValue}&page=${page}`;\n        const params = '&image_type=photo&orientation=horizontal&safesearch=true&per_page=15';\n        const url = BASE_URL + Query + params;\n        \n    return axios.get(url)\n        .then(response => {\n            const data = response.data;\n            if (data.total === 0) {\n                throw new Error('No images found');\n            }\n            return data;\n        })\n        .catch(error => {\n            throw new Error(error.response.data.message);\n        });\n    }\n\n    function renderImages(array) {\n    const markup = array\n        .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"400\" height=\"240\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n\n    galleryEl.innerHTML = markup;\n    lightbox.refresh();\n    showLoadMoreButton();\n    }\n\n    function renderError(error) {\n    galleryEl.innerHTML = '';\n    iziToast.show({\n        message: `âŒ \"${error.message}\". Please try again!`,\n        color: 'red',\n        position: 'topRight',\n        maxWidth: '400px',\n    });\n    }\n\n    function showLoader() {\n    loaderElem.style.display = 'block';\n    }\n\n    function hideLoader() {\n    loaderElem.style.display = 'none';\n    }\n\n    function showLoadMoreButton() {\n        loadMoreBtn.hidden = false;\n    }\n\n    loadMoreBtn.addEventListener('click', async () => {\n        showLoadMoreLoader();\n\n        try {\n            const data = await getPhotoBySearch(currentSearch, currentPage + 1);\n            appendImages(data.hits);\n            currentPage++;\n        } catch (error) {\n            renderError(error);\n        } finally {\n            hideLoadMoreLoader();\n        }\n    });\n\n    function appendImages(array) {\n        const markup = array\n            .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n                return `\n                    <div class=\"gallery\">\n                        <a href=\"${largeImageURL}\">\n                            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n                            <ul class=\"info-cards-container\">\n                                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n                            </ul>\n                        </a>\n                    </div>\n                `;\n            })\n            .join('');\n\n        galleryEl.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n\n        hideLoadMoreLoader();\n    }\n\n    function showLoadMoreLoader() {\n        loadMoreLoader.style.display = 'block';\n        loadMoreBtn.hidden = true;\n    }\n\n\n    function hideLoadMoreLoader() {\n        loadMoreLoader.style.display = 'none';\n        loadMoreBtn.hidden = false;\n    }\n});\n"],"names":["formElem","galleryEl","loaderElem","loadMoreBtn","loadMoreLoader","hideLoader","lightbox","SimpleLightbox","onSubmit","currentPage","currentSearch","e","showLoader","data","getPhotoBySearch","renderImages","error","renderError","searchValue","page","BASE_URL","Query","params","url","axios","response","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","showLoadMoreButton","iziToast","showLoadMoreLoader","appendImages","hideLoadMoreLoader"],"mappings":"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"}